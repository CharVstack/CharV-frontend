{"version":3,"file":"DeleteVmButton.stories-6c4ef85b.js","sources":["../../node_modules/@mui/icons-material/Dangerous.js","../../src/components/molecules/Buttons/DeleteVmButton/DeleteVmButton.tsx"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M15.73 3H8.27L3 8.27v7.46L8.27 21h7.46L21 15.73V8.27L15.73 3zM17 15.74 15.74 17 12 13.26 8.26 17 7 15.74 10.74 12 7 8.26 8.26 7 12 10.74 15.74 7 17 8.26 13.26 12 17 15.74z\"\n}), 'Dangerous');\nexports.default = _default;","import { getSWRDefaultKey } from '@aspida/swr';\nimport Dangerous from '@mui/icons-material/Dangerous';\nimport { Button } from '@mui/material';\nimport { useCallback } from 'react';\nimport { mutate } from 'swr';\n\nimport { useSelectedVmReadOnlyAtom } from '@components/organisms/Tables';\nimport { apiClient } from '@lib/apiClient';\n\nconst useDeleteHandler = (vms: string[]) => {\n  const deleteHandler = useCallback(async () => {\n    await Promise.all(\n      vms.map(async (vm) => {\n        await apiClient.api.v1.vms\n          ._vmId(vm)\n          .$delete()\n          .then(async () => {\n            await mutate(getSWRDefaultKey(apiClient.api.v1.vms));\n          });\n      })\n    );\n  }, [vms]);\n  return deleteHandler;\n};\n\nexport const DeleteVmButton = () => {\n  const vms = useSelectedVmReadOnlyAtom();\n  return <BaseDeleteVmButton vms={vms} />;\n};\n\nexport const BaseDeleteVmButton = ({ vms }: { vms: string[] }) => {\n  const handleDelete = useDeleteHandler(vms);\n  return (\n    <Button\n      startIcon={<Dangerous />}\n      disabled={vms.length === 0}\n      variant=\"contained\"\n      color=\"error\"\n      onClick={handleDelete}\n    >\n      DELETE\n    </Button>\n  );\n};\n"],"names":["_interopRequireDefault","require$$0","Dangerous","default_1","_createSvgIcon","require$$1","_jsxRuntime","require$$2","_default","useDeleteHandler","__name","vms","useCallback","vm","apiClient","mutate","getSWRDefaultKey","BaseDeleteVmButton","handleDelete","_jsx","Button"],"mappings":"ouCAEIA,EAAyBC,EAAAA,QAC7B,OAAO,eAAeC,EAAS,aAAc,CAC3C,MAAO,EACT,CAAC,EACD,IAAeC,EAAAD,EAAA,QAAG,OACdE,EAAiBJ,EAAuBK,EAAA,CAAgC,EACxEC,EAAcC,EACdC,KAAeJ,EAAe,YAA2BE,EAAY,KAAK,OAAQ,CACpF,EAAG,6KACL,CAAC,EAAG,WAAW,EACfH,EAAAD,EAAA,QAAkBM,ECHlB,MAAAC,EAAAC,EAAAC,GACEC,EAAAA,QAAAA,YAAA,SAAA,CACE,MAAA,QAAA,IAAAD,EAAA,IAAA,MAAAE,GAAA,CAEI,MAAAC,EAAA,IAAA,GAAA,IAAA,MAAAD,CAAA,EAAA,UAAA,KAAA,SAAA,CAII,MAAAE,EAAAC,EAAAF,EAAA,IAAA,GAAA,GAAA,CAAA,CAAmD,CAAA,CACpD,CAAA,CAAA,CACH,EAAA,CAAAH,CAAA,CAAA,EAVR,oBAqBOM,EAAAP,EAAA,CAAA,CAA4B,IAAAC,CAAyB,IAAA,CAC1D,MAAAO,EAAAT,EAAAE,CAAA,EACA,OAAAQ,EAAAC,EAAA,CACS,UAAAD,EAAAjB,EAAA,EAAA,EACoB,SAAAS,EAAA,SAAA,EACA,QAAA,YACjB,MAAA,QACF,QAAAO,EACGA,SAAAA,QAAa,CAAA,CAK5B,EAbO"}